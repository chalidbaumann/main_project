let json = {
    0: {
        "text": "Oh freut mich. Und gerngeschehen",
        "author": "Sonja",
        "subjectivity": 0.46,
        "polarity": 0.53,
        "confidence": 0.2
    },
    1: {
        "text": "Das habe ich auch gewusst. Danke. Wieso? Oje Aber ja, ich habe auch tolle Albträme gehabt diese Nacht.",
        "author": "Sonja",
        "subjectivity": 0.38,
        "polarity": 0.49,
        "confidence": 0.4
    },
    2: {
        "text": "Ist ja erst ein erster Entwurf :) Ah ich glaube dann hab ichs noch nicht gehabt nein, aber ich habe dann später noch etwas dran gearbeitet :) Also einfach an den Teilen, die ich geschrieben habe und sonst noch Sachen reinkopiert Stimmt, hab ich gesehen, danke :) Ja :) Bei den andern konnte ich halt nicht viel machen. Sie sollten schon noch ihre Quellen und so reintun Ja :) Und dir? Ah okay :)",
        "author": "Sonja",
        "subjectivity": 0.29,
        "polarity": 0.98,
        "confidence": 0.6
    },
    3: {
        "text": "Ich komme auch gerade :)",
        "author": "Sonja",
        "subjectivity": 0.43,
        "polarity": 0.46,
        "confidence": 0.84
    },
    4: {
        "text": "So, endlich kann ich (jedenfalls teilweise, bis wir losgehen) auf die Nachrichten reagieren! Ooh ok interessant! Ja Broken Needle hat wirklich eine schöne Melodie. Aber interessant, dass du Erased zu deinen Lieblings zählst, das hätte ich jetzt irgendwie nicht gedacht. Ah und Spirits will collide.. ja das ist vielleicht nicht mega metal-mässig, aber es hat so etwas mega cooles motivierend-tröstend-ermuetigendes finge ich. Uhh cool. Uii. Uuh yay, Verbündete, die Marylin Manson toll finden (Nicht wie geschmackslose Personen wie Sebi). Wir sind zusammen auf dem Zug. Yayy ja das ist wirklich noch eingängig und natürlich cool. Nein. Ja es ist interessant. Uhh yay. Das ist ja wirklich eine mega fiese Formulierung.",
        "author": "Sonja",
        "subjectivity": 0.31,
        "polarity": 0.99,
        "confidence": 0.84
    },
    5: {
        "text": "Kannst du mir schreiben wenn du davon zurück bist? Mir gehts gerade nicht gut. Und sehen wir uns morgen einmal, nicht zu spät? Am liebsten hätte ich heute Abend ganz viele Umarmungen von dir. Können wir doch noch Fluch der Karibik 4 zusammen schauen? Morgen Abend zum Beispiel?",
        "author": "Sonja",
        "subjectivity": 0.19,
        "polarity": -0.66,
        "confidence": 0.84
    },
    6: {
        "text": "Ah ja.. gehst du heute Abend von Olten an die Party oder direkt von Zürich? Ah ok. Ich hoffe es reicht mir auch. Also vorher nochmals nach Olten für das Schulzeug hintun. Wollen wir dann zusammen losgehen? Uah ich habe gerade keine Zeit für Sprachnachrichten. Wann gehst du los? ? Wegen dem was Kriszti geschrieben hat. Treffen wir uns jetzt irgendwie 17:30? Ich schaffe es wahrscheinlich frühstens auf den. Nein. Ausser ich ginge später hin als 17:30. Das scheisst mich schon sehr an. Uii Planänderung, ich habs jetzt doch schon auf den 3 Zug geschafft.",
        "author": "Sonja",
        "subjectivity": 0.1,
        "polarity": 0.83,
        "confidence": 0.84
    },
    7: {
        "text": "Ohh ups wir sollten ja Hochdeutsch schreiben. Oke:) Hast glaub ich nicht mehr viel verpasst. Ja, ich denke schon.",
        "author": "Sonja",
        "subjectivity": 0,
        "polarity": 0,
        "confidence": 0.84
    },
    8: {
        "text": "Habe es gekriegt. Was für ein Papier möchtest du? Bis wann bräuchtest du die Ausdrucke? Ok dann bereite ich die Daten einfach vor. Heute Mittag drucke ich das Foto von Oma. Ich besorge auch einen Bilderrahmen ok?",
        "author": "Chalid",
        "subjectivity": 0.28,
        "polarity": 0.89,
        "confidence": 0.84
    },
    9: {
        "text": "Hey. Bin fertig aber komme vor dem Mittag nicht mehr retour. Isst du während der Besprechung? Ok dann guten Appetit. Heeey. Ich habe bei canva eine Präsentation gestartet. Wir können gleichzeitig daran arbeiten... ich habe dir eine Einladung gesendet aber auch den Link auf Miro geladen. Die Folien die drin sind können löschen, anpassen usw. Die Daten auf GitHub sind wieder aktuell. Ich arbeite dann mal weiter an der Präsi. Heeey. Kannst du deine Skizzen betreffend der Umsetzung in die Präsentation einfügen? Danke",
        "author": "Chalid",
        "subjectivity": 0.18,
        "polarity": 0.89,
        "confidence": 0.8
    },
    10: {
        "text": "Morpheus ist gerade nach Hause gekommen. Hat mit eine lebendige Maus vor die Füsse gelegt. Ich glaube sie ist unter das Sofa. Ok.",
        "author": "Chalid",
        "subjectivity": 0.3,
        "polarity": 0.83,
        "confidence": 1
    },
    11: {
        "text": "Ih omg, schaut mal. Das sieht aus, als hätte ich heftig Photoshop gebraucht. Aber omg, das hört sich schon mega nervig an. Wirklich nicht. Uh yay. Oh das hört sich doch gut an. Und nach Erfolg. Es sieht lustig aus. Uah makaber. 10 Stunden. Ist doch gut.",
        "author": "Sonja",
        "subjectivity": 0.29,
        "polarity": 0.55,
        "confidence": 0.84
    },
    12: {
        "text": "Woah heftig. Danke. Ich dachte, wir würden einfach mit Miro präsentieren. Sorry, ich war ja heute Abend noch weg. Ganz cool. Danke vielmal!! Eh welche meinst du genau? Sonst mache ich es dann noch morgen Vormittag in einer Pause oder so. Bis morgen, gute Nacht. Bist du schon rüber ins andere Gebäude?",
        "author": "Sonja",
        "subjectivity": 0.3,
        "polarity": 0.95,
        "confidence": 0.84
    },
    13: {
        "text": "Ah stimmt ja wie war es? Hehe ich dachte es hilf und ist vielleicht übersichtlicher. Sonst ist es schon einmal eine gute Vorbereitung für die Zwischenpräsentation. Bis morgen. Ah super! Cool! Ich dachte wir müssen es morgen früh schon haben. Ok dann schauen wir es morgen an. Gute Nacht.",
        "author": "Chalid",
        "subjectivity": 0.33,
        "polarity": 0.96,
        "confidence": 0.84
    },
    14: {
        "text": "Hallo Papi, ich schicke dir gerade noch einen Text aufs Mail... Könntest du den heute vielleicht einmal durchlesen und mir Feedback geben? Also ein bisschen zu allem: Verständlichkeit vom Inhalt, Struktur, Rechtschreibung, Quellen, einheitliche Schreibweise.. Ausser zum Layout, das müssen wir erst noch machen. Danke vielvielmal!",
        "author": "Sonja",
        "subjectivity": 0.16,
        "polarity": 0.81,
        "confidence": 0.84
    },
    15: {
        "text": "Was gibt es zum Mittagessen? Denkt ihr Autofahren vor oder nach dem Abendessen? Um 18 Uhr wäre dann Chorfest. 16 Uhr wäre gut. Abladen lieber in Belp, dass ich dann mit Anna hingehen kann. Ich wäre dann um 15 Uhr in Toffen am Bahnhof, falls es ein nettes Taxi gibt. Weiss man da schon mehr? Dankeeeeee.",
        "author": "Sonja",
        "subjectivity": 0.15,
        "polarity": 0.85,
        "confidence": 0.84
    },
    16: {
        "text": "typisch Katze. Ich gehe heute nicht zur Party. Viel Spass! Oooh dir auch.",
        "author": "Chalid",
        "subjectivity": 0,
        "polarity": 0,
        "confidence": 0.84
    }
}

//subjectivity
let objective; // objektiv = 0 (blau)
let subjective; // subjektiv = 1 (gelb)



//polarity
let negative; // negativ = -1 (kleine Bewegung)
let positive; // positiv = 1 (grosse Bewegung)

let font;

function preload() {
    font = loadFont('assets/Mirza-Regular.ttf');
}

let points; //für textToPoints
let bounds; //für bounding box für Text ?


//confidence
let unsure; // unsicher = 0 (kleine Schrift)
let sure; // sicher = 1 (grosse Schrift)


let count = 0;


function setup() {
    createCanvas(window.innerWidth, window.innerHeight);
    background(0, 0, 0);
    //subjectivity
    objective = color(0, 255, 255);
    subjective = color(255, 255, 0);
    //polarity
    points = font.textToPoints(json[count].text, 50, 50, 5, {
        sampleFactor: 100,
        simplifyThreshold: 0
    })
    bounds = font.textBounds(json[count].text, 50, 50, 5); //bounding box für Text ?
    //confidence
    unsure = 5;
    sure = 10;
    frameRate(0.4);
}




function draw() {
    if (count > (Object.keys(json).length - 1)) { //macht, dass es wieder vorne anfängt wenn Liste zu Ende ist
        count = 0;
    }
    //subjectivity
    let mycolor = lerpColor(objective, subjective, json[count].subjectivity); //färbt Text nach objektiv/subjektiv
    fill(mycolor);
    //text(json[count].text, 50, 50, 900, window.innerHeight);
    //textWrap(WORD);
    //polarity
    beginShape(); //Form
    translate(-bounds.x * width / bounds.w, -bounds.y * height / bounds.h); //Bewegung
    for (let i = 0; i < points.length; i++) {
        let p = points[i];
        vertex( //Angaben zur Form innerhalb Funktion beginShape() und endShape()
            p.x * width / bounds.w + sin(10 * p.y / bounds.h + millis() / 1000) * width / 30, //wobblestärke
            p.y * height / bounds.h
        );
    }
    endShape(CLOSE);
    // confidence
    let textGroesse = map(json[count].confidence, 0, 1, unsure, sure);
    textSize(textGroesse);
    count++;
}